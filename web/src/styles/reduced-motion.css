/* Reduced Motion Support
   Respects prefers-reduced-motion and optional [data-motion="reduced"] override
*/

/* 1) System preference: reduced motion */
@media (prefers-reduced-motion: reduce) {
  /* Disable smooth scroll reliably (not inherited) */
  html:focus-within {
    scroll-behavior: auto !important;
  }
  html {
    scroll-behavior: auto !important;
  }

  /* Reduce or remove motion everywhere */
  *,
  *::before,
  *::after {
    animation: none !important;
    transition-property: none !important;
    transition-duration: 0ms !important;
    transition-delay: 0ms !important;
  }

  /* If you rely on scroll snapping for carousels, disable the motion aspect */
  [class*="carousel"],
  [class*="slider"] {
    scroll-snap-type: none !important;
  }

  /* Parallax / background-attachment motion */
  .parallax,
  [class*="parallax"] {
    background-attachment: scroll !important;
    transform: none !important;
  }

  /* Stop spinners/loading animations but keep visible */
  .spinner,
  [class*="spinner"],
  [class*="loading"] {
    animation: none !important;
  }

  /* Avoid hover-induced movement on common interactive elements only */
  a:hover,
  button:hover,
  [role="button"]:hover,
  [tabindex]:hover {
    transform: none !important;
  }

  /* Keep focus indication (no animation) */
  :focus,
  :focus-visible {
    transition: none !important;
  }
}

/* 2) Manual override: reduced motion mode (takes effect regardless of system setting)
   Apply the same rules under a parent attribute flag. */
[data-motion="reduced"] html:focus-within,
[data-motion="reduced"] html {
  scroll-behavior: auto !important;
}

[data-motion="reduced"] *,
[data-motion="reduced"] *::before,
[data-motion="reduced"] *::after {
  animation: none !important;
  transition-property: none !important;
  transition-duration: 0ms !important;
  transition-delay: 0ms !important;
}

[data-motion="reduced"] .parallax,
[data-motion="reduced"] [class*="parallax"] {
  background-attachment: scroll !important;
  transform: none !important;
}

[data-motion="reduced"] .spinner,
[data-motion="reduced"] [class*="spinner"],
[data-motion="reduced"] [class*="loading"] {
  animation: none !important;
}

[data-motion="reduced"] [class*="carousel"],
[data-motion="reduced"] [class*="slider"] {
  scroll-snap-type: none !important;
}

[data-motion="reduced"] a:hover,
[data-motion="reduced"] button:hover,
[data-motion="reduced"] [role="button"]:hover,
[data-motion="reduced"] [tabindex]:hover {
  transform: none !important;
}

/* 3) Motion-safe utilities (only when motion is allowed) */
@media (prefers-reduced-motion: no-preference) {
  .motion-safe-fade {
    animation: fadeIn 0.3s ease-in;
  }

  .motion-safe-slide {
    animation: slideIn 0.4s ease-out;
  }

  .motion-safe-scale {
    animation: scaleIn 0.3s ease-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to   { opacity: 1; }
  }

  @keyframes slideIn {
    from { transform: translateY(20px); opacity: 0; }
    to   { transform: translateY(0); opacity: 1; }
  }

  @keyframes scaleIn {
    from { transform: scale(0.95); opacity: 0; }
    to   { transform: scale(1); opacity: 1; }
  }
}
